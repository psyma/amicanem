/*! For license information please see app.d909539c.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[524],{5926:(e,t,r)=>{var n={"./hello_controller.js":6824,"./main_controller.js":3089,"./registration_controller.js":27,"./resetpassword_controller.js":4378,"./security_controller.js":2401};function a(e){var t=o(e);return r(t)}function o(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=o,e.exports=a,a.id=5926},5828:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(2891);const a={"symfony--ux-turbo--turbo-core":class extends n.xI{constructor(e){super(e),this.__stimulusLazyController=!0}initialize(){this.application.controllers.find((e=>e.identifier===this.identifier&&e.__stimulusLazyController))||Promise.all([r.e(89),r.e(797)]).then(r.bind(r,8797)).then((e=>{this.application.register(this.identifier,e.default)}))}}}},6824:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});r(2675),r(9463),r(2259),r(5700),r(6280),r(6918),r(3792),r(9572),r(4170),r(2892),r(9904),r(4185),r(875),r(287),r(6099),r(825),r(7764),r(2953);function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}function o(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=n(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}function i(e,t,r){return t=c(t),function(e,t){if(t&&("object"==n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,s()?Reflect.construct(t,r||[],c(e).constructor):t.apply(e,r))}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s=function(){return!!e})()}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e),r=t,(n=[{key:"connect",value:function(){console.log("Hello World!")}}])&&a(r.prototype,n),o&&a(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(r(2891).xI)},3089:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>oe});r(2675),r(9463),r(6412),r(2259),r(5700),r(8125),r(6280),r(6918),r(8706),r(1629),r(3418),r(3792),r(8598),r(2062),r(4114),r(4490),r(4782),r(4743),r(1745),r(8309),r(9089),r(739),r(9572),r(3288),r(4170),r(2010),r(3110),r(4731),r(6033),r(479),r(2892),r(9904),r(4185),r(875),r(9432),r(287),r(6099),r(8940),r(3362),r(825),r(7495),r(8781),r(7764),r(1761),r(8156),r(2762),r(1489),r(8140),r(1630),r(2170),r(5044),r(1920),r(1694),r(9955),r(1903),r(1134),r(3206),r(4496),r(6651),r(2887),r(9369),r(6812),r(8995),r(1575),r(6072),r(8747),r(8845),r(9423),r(7301),r(373),r(6614),r(1405),r(3684),r(3250),r(149),r(4082),r(2945),r(2207),r(3500),r(2953),r(5815),r(4979),r(9739),r(6031),r(3296),r(7208),r(8408);var n,a=r(2891),o=(r(4346),r(906),r(2712),r(6910),r(4554),r(2637),r(6880)),i=r.n(o),s=r(1396),c=r.n(s),u=r(9949),l=r(2315);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,s=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function m(){m=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var o=t&&t.prototype instanceof b?t:b,i=Object.create(o.prototype),s=new j(n||[]);return a(i,"_invoke",{value:A(e,r,s)}),i}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var f="suspendedStart",h="suspendedYield",g="executing",v="completed",y={};function b(){}function w(){}function x(){}var E={};u(E,i,(function(){return this}));var k=Object.getPrototypeOf,L=k&&k(k(B([])));L&&L!==r&&n.call(L,i)&&(E=L);var M=x.prototype=b.prototype=Object.create(E);function C(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function r(a,o,i,s){var c=p(e[a],e,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==d(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(l).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,s)}))}s(c.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var a=f;return function(o,i){if(a===g)throw Error("Generator is already running");if(a===v){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var c=T(s,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===f)throw a=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=g;var u=p(t,r,n);if("normal"===u.type){if(a=n.done?v:h,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=v,n.method="throw",n.arg=u.arg)}}}function T(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var o=p(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function B(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(d(t)+" is not iterable")}return w.prototype=x,a(M,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:w,configurable:!0}),w.displayName=u(x,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,u(e,c,"GeneratorFunction")),e.prototype=Object.create(M),e},t.awrap=function(e){return{__await:e}},C(I.prototype),u(I.prototype,s,(function(){return this})),t.AsyncIterator=I,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new I(l(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(M),u(M,c,"Generator"),u(M,i,(function(){return this})),u(M,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=B,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return s.type="throw",s.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:B(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function h(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function g(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){h(o,n,a,i,s,"next",e)}function s(e){h(o,n,a,i,s,"throw",e)}i(void 0)}))}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,x(n.key),n)}}function b(e,t,r){return t&&y(e.prototype,t),r&&y(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function w(e,t,r){return(t=x(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}var E=function(){return b((function e(){v(this,e)}),null,[{key:"TEXT",get:function(){return TEXT}},{key:"IMAGE",get:function(){return IMAGE}},{key:"GIF",get:function(){return GIF}}])}();w(E,"TEXT",0),w(E,"IMAGE",1),w(E,"GIF",2),w(E,"AUDIO",3);var k=b((function e(){v(this,e)}));n=k,w(k,"encryptMessage",function(){var e=g(m().mark((function e(t,r){var a,o,i,s,c,u,l,d,p,f,h=arguments;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>2&&void 0!==h[2]?h[2]:190,e.next=3,window.crypto.subtle.importKey("spki",t,{name:"RSA-OAEP",hash:"SHA-256"},!1,["encrypt"]);case 3:for(o=e.sent,i=new TextEncoder,s=i.encode(r),c=[],u=0;u<s.length;u+=a)c.push(s.slice(u,u+a));return e.next=10,Promise.all(c.map((function(e){return window.crypto.subtle.encrypt({name:"RSA-OAEP"},o,e)})));case 10:return l=e.sent,d=l.reduce((function(e,t){return e+t.byteLength}),0),p=new Uint8Array(d),f=0,l.forEach((function(e){p.set(new Uint8Array(e),f),f+=e.byteLength})),e.abrupt("return",n.arrayBufferToBase64(p.buffer));case 16:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),w(k,"decryptMessage",function(){var e=g(m().mark((function e(t,r){var a,o,i,s,c,u,l,d,p,f,h=arguments;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>2&&void 0!==h[2]?h[2]:256,o=n.base64ToArrayBuffer(r),e.next=4,window.crypto.subtle.importKey("pkcs8",t,{name:"RSA-OAEP",hash:"SHA-256"},!1,["decrypt"]);case 4:for(i=e.sent,s=[],c=0;c<o.byteLength;c+=a)s.push(o.slice(c,c+a));return e.next=9,Promise.all(s.map((function(e){return window.crypto.subtle.decrypt({name:"RSA-OAEP"},i,e)})));case 9:return u=e.sent,l=u.reduce((function(e,t){return e+t.byteLength}),0),d=new Uint8Array(l),p=0,u.forEach((function(e){d.set(new Uint8Array(e),p),p+=e.byteLength})),f=new TextDecoder,e.abrupt("return",f.decode(d));case 16:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),w(k,"generateEncryptionKeyPair",g(m().mark((function e(){var t,r,n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"]);case 2:return t=e.sent,e.next=5,window.crypto.subtle.exportKey("spki",t.publicKey);case 5:return r=e.sent,e.next=8,window.crypto.subtle.exportKey("pkcs8",t.privateKey);case 8:return n=e.sent,e.abrupt("return",{publicKey:r,privateKey:n});case 10:case"end":return e.stop()}}),e)})))),w(k,"generateRandomString",(function(e){for(var t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=r.charAt(Math.floor(62*Math.random()));return t})),w(k,"arrayBufferToBase64",(function(e){for(var t=new Uint8Array(e),r="",n=t.byteLength,a=0;a<n;a++)r+=String.fromCharCode(t[a]);return btoa(r)})),w(k,"base64ToArrayBuffer",(function(e){for(var t=window.atob(e),r=t.length,n=new Uint8Array(r),a=0;a<r;a++)n[a]=t.charCodeAt(a);return n.buffer})),w(k,"formatTimestampIntoDaysOfWeek",(function(e){var t=new Date(parseInt(e)),r=new Date,n=new Date(r.getFullYear(),r.getMonth(),r.getDate()).getTime(),a=n-864e5,o=n-6048e5,i=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime();return i>=n?"Today":i>=a&&i<n?"Yesterday":i>=o&&i<a?["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t.getDay()]:e})),w(k,"setChatboxMessageAvatarHidden",(function(){for(var e=document.getElementById("chatbox"),t=Array.from(e.children),r=0;r<t.length-1;r++){var n=t[r],a=t[r+1],o=n.querySelector(".avatar"),i=a.querySelector(".avatar");null!=o&&null!=i&&o.classList.add("invisible")}})),w(k,"setChatboxMessageBorderAndMargin",(function(){for(var e=document.getElementById("chatbox"),t=Array.from(e.children),r=0;r<t.length-1;r++){var n=t[r],a=t[r+1],o=n.querySelector(".avatar"),i=a.querySelector(".avatar");if(null!=o&&null!=i)n.classList.remove("mb-5"),n.querySelector(".chat-message-container").classList.remove("rounded-bl-none"),r!=t.length-2&&a.classList.add("mb-5");else if(null==o&&null==i)try{n.classList.remove("mb-5"),n.querySelector(".chat-message-container").classList.remove("rounded-br-none"),r!=t.length-2&&a.classList.add("mb-5")}catch(e){}else r!=t.length-2&&a.classList.add("mb-5")}})),w(k,"setChatboxDividerTimestamp",(function(){var e=document.getElementById("chatbox"),t=Array.from(e.children),r={year:"numeric",month:"long",day:"numeric"};e.querySelectorAll(".divider-timestamp").forEach((function(t){e.removeChild(t)}));for(var a=null,o=0;o<t.length;o++){var i=t[o],s=i.getAttribute("timestamp");if(null!=s){var c=new Date(parseInt(s)).toLocaleDateString("en-US",r);if(a!=c){var u=null,l=n.formatTimestampIntoDaysOfWeek(s);u=l==s?n.createDividerTimestampElement(c):n.createDividerTimestampElement(l),e.insertBefore(u,i)}a=c}}})),w(k,"sortUsersListBaseOnLastMessageTimestamp",(function(){var e=document.getElementById("users-list");Array.from(e.children).sort((function(e,t){var r=parseInt(e.querySelector(".last-message").getAttribute("timestamp"));return parseInt(t.querySelector(".last-message").getAttribute("timestamp"))-r})).forEach((function(t){e.removeChild(t),e.appendChild(t)}))})),w(k,"reOrderUsersListIfNewMessageIsBeingSentOrReceived",(function(e){var t=document.getElementById("users-list"),r=document.getElementById("user".concat(e));t.removeChild(r),t.prepend(r)})),w(k,"isTimestampIsGreaterThanNminutes",(function(e,t){var r=60*t*1e3;return parseInt(e)>=Date.now()-r})),w(k,"saveCaretPosition",(function(e){var t=window.getSelection().getRangeAt(0),r=t.cloneRange();return r.selectNodeContents(e),r.setEnd(t.endContainer,t.endOffset),r.toString().length})),w(k,"restoreCaretPosition",(function(e,t){for(var r=window.getSelection(),n=document.createRange(),a=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1),o=a.nextNode(),i=0;o;){var s=o.length;if(i+s>=t){n.setStart(o,t-i),n.setEnd(o,t-i);break}i+=s,o=a.nextNode()}r.removeAllRanges(),r.addRange(n)})),w(k,"getUserAgentPlatformType",(function(){return i().getParser(window.navigator.userAgent).parsedResult.platform.type})),w(k,"hideMediaGroup",(function(){var e=document.getElementById("media-group");"mobile"==n.getUserAgentPlatformType()&&e.classList.add("hidden")})),w(k,"unHideMediaGroup",(function(){document.getElementById("media-group").classList.remove("hidden")})),w(k,"setViewerJsImageElement",(function(e,t){var r=document.getElementById("viewerjs-images-container"),n=e.querySelector(".image"),a=n.getAttribute("url"),o=document.createElement("img");o.src=a;var i=document.createElement("li");i.appendChild(o),r.appendChild(i);var s=r.childNodes.length-1;t.update(),n.onclick=function(){t.show(),t.view(s)}})),w(k,"setUserLastMessageContent",(function(e,t){document.getElementById("user".concat(e,"-last-message")).textContent=t})),w(k,"setUserLastMessageTimestamp",(function(e,t){document.getElementById("user".concat(e,"-last-message")).setAttribute("timestamp",t)})),w(k,"setUserLastMessageTimeAgo",(function(e,t,r){var a=document.getElementById("user".concat(e,"-time-ago"));if(a.textContent="·"+r.format(t,"mini-now"),n.isTimestampIsGreaterThanNminutes(t,60))var o=setInterval((function(){document.getElementById("user".concat(e,"-last-message")).getAttribute("timestamp")!=t?clearInterval(o):a.textContent="·"+r.format(t,"mini-now")}),3e4)})),w(k,"setMessageTextElementTimeAgo",(function(e,t,r){e.textContent=r.format(t,"round"),n.isTimestampIsGreaterThanNminutes(t,60)&&setInterval((function(){e.textContent=r.format(t,"round")}),3e4)})),w(k,"setIntroductionElement",(function(e,t){var r=document.getElementById("chatbox"),n=document.createElement("div"),a=document.createElement("div");a.className="flex flex-col justify-center items-center absolute left-0 right-0 top-0 bottom-0";var o=document.createElement("div");o.className="w-16 h-16 rounded-full bg-contain bg-center shadow border border-gray-200 dark:border-gray-700 mb-2",o.style.backgroundImage="url('".concat(t,"')");var i=document.createElement("p");i.className="outline-none text-sm text-black opacity-80 dark:text-white dark:opacity-90 font-semibold leading-4 tracking-[.01rem] default-outline",i.tabIndex=0,i.textContent=e;var s=document.createElement("div");s.className="bg-indigo-50 dark:bg-gray-600 rounded p-3 mt-8 mx-5 sm:mx-0";var c=document.createElement("div");c.className="flex justify-center items-center gap-1";var u=document.createElementNS("http://www.w3.org/2000/svg","svg");u.setAttribute("viewBox","0 0 24 24"),u.setAttribute("fill","currentColor"),u.setAttribute("aria-hidden","true"),u.setAttribute("class","w-5 h-6 group-focus:text-indigo-400 hover:text-indigo-400 active:text-indigo-400 active:scale-110 dark:text-gray-500 transition ease-out duration-200 text-gray-300");var l=document.createElementNS("http://www.w3.org/2000/svg","path");l.setAttribute("fill-rule","evenodd"),l.setAttribute("d","M8 10V7a4 4 0 1 1 8 0v3h1a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h1Zm2-3a2 2 0 1 1 4 0v3h-4V7Zm2 6a1 1 0 0 1 1 1v3a1 1 0 1 1-2 0v-3a1 1 0 0 1 1-1Z"),l.setAttribute("clip-rule","evenodd"),u.appendChild(l);var d=document.createElement("span");d.className="flex align-middle outline-none text-xs text-black opacity-80 dark:text-white dark:opacity-90 font-bold leading-4 tracking-[.01rem] default-outline",d.tabIndex=0,d.textContent="End-to-end encrypted",c.appendChild(u),c.appendChild(d);var p=document.createElement("div");p.className="text-center mx-auto outline-none text-xs text-black opacity-80 dark:text-white dark:opacity-90 leading-4 tracking-[.01rem] default-outline",p.tabIndex=0,p.innerHTML='Messages and calls are secured with end-to-end encryption. <span class="text-blue-500">Learn more</span>',s.appendChild(c),s.appendChild(p),a.appendChild(o),a.appendChild(i),a.appendChild(s),n.appendChild(a),r.appendChild(n)})),w(k,"isTotalImagesToSendNotExceeded",(function(e){if(e>5){var t="You can upload a maximum of ".concat(5," files, but you have attempted to upload ").concat(e," files.");return n.showAlertMessage("Maximum files to upload exceeded",t),!1}return!0})),w(k,"isImageFilesizeNotExceeded",(function(e){function t(e){if("number"!=typeof e||!Number.isInteger(e))throw new Error("Input must be an integer.");var t=["th","st","nd","rd"],r=e%100;return e+(t[(r-20)%10]||t[r]||t[0])}for(var r=0;r<e.length;r++){var a=p(e[r],2),o=(a[0],a[1].file.size);if(o>10485760){var i="The ".concat(t(r+1)," image size (").concat(Math.round(o/1048576)," MB) exceeds the maximum allowed filesize of 10 MB.");return n.showAlertMessage("Maximum upload filesize exceeded",i),!1}}return!0})),w(k,"showAlertMessage",(function(e,t){var r=document.getElementById("alert-message-container"),n=r.querySelector("#alert-message-title"),a=r.querySelector("#alert-message-content");n.textContent=e,a.textContent=t,r.classList.remove("hidden"),setTimeout((function(){r.classList.add("hidden")}),5e3)})),w(k,"progressSvgElementCallback",(function(e,t){var r=e.querySelector(".svgCircle"),n=e.querySelector(".progressCircle");e.querySelector(".img-check").classList.add("hidden"),100==t?r.classList.add("hidden"):(r.classList.remove("hidden"),n.setAttribute("stroke-dashoffset","calc(251.2px - (251.2px * ".concat(t-1," / 100))")))})),w(k,"reOrderLastFourChatboxElements",(function(){var e=document.getElementById("chatbox");Array.from(e.children).slice(-4).sort((function(e,t){return e.getAttribute("timestamp")-t.getAttribute("timestamp")})).forEach((function(t){e.removeChild(t),e.appendChild(t)}))})),w(k,"createDividerTimestampElement",(function(e){var t=document.createElement("div");t.className="divider-timestamp w-full my-7 flex items-center justify-center";var r=document.createElement("div");r.className="w-full h-0 border-t border-dashed dark:border-gray-600 dark:bg-opacity-0";var n=document.createElement("p");n.className="outline-none text-xs font-light text-black opacity-80 dark:text-white dark:opacity-90 leading-4 tracking-[.01rem] mx-2 whitespace-nowrap",n.textContent=e;var a=document.createElement("div");return a.className="w-full h-0 border-t border-dashed dark:border-gray-600 dark:bg-opacity-0",t.appendChild(r),t.appendChild(n),t.appendChild(a),t})),w(k,"createProgressSvgElemet",(function(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"svg");t.setAttribute("viewBox","0 0 100 100"),t.classList.add("svgCircle","w-12","h-12","hidden","absolute","inset-0","justify-center","self-center","m-auto");var r=document.createElementNS(e,"circle");r.setAttribute("cx","50"),r.setAttribute("cy","50"),r.setAttribute("r","40"),r.setAttribute("fill","transparent"),r.setAttribute("stroke-width","5"),r.classList.add("text-gray-200","stroke-current");var n=document.createElementNS(e,"circle");return n.setAttribute("cx","50"),n.setAttribute("cy","50"),n.setAttribute("r","40"),n.setAttribute("fill","transparent"),n.setAttribute("stroke-width","5"),n.setAttribute("stroke-linecap","round"),n.setAttribute("stroke-dasharray","251.2"),n.setAttribute("stroke-dashoffset","calc(251.2px - (251.2px * 1) / 100)"),n.classList.add("progressCircle","text-indigo-500","progress-ring__circle","stroke-current"),t.appendChild(r),t.appendChild(n),t})),w(k,"createLoaderElement",(function(){var e=localStorage.getItem("color-theme"),t=document.createElement("div");return t.className="dark"===e?"loader-white absolute":"loader-black absolute",t.style.left="calc(50% - 25px)",t.style.top="50%",t})),w(k,"createVoiceMessageElement",(function(e){var t=document.createElement("div");t.classList.add("group","w-full","self-center","rounded","transition","duration-500","bg-indigo-50","dark:bg-gray-600");var r=document.createElement("div");r.classList.add("flex","relative","items-center","outline-none","gap-2"),r.setAttribute("tabindex","0"),r.setAttribute("aria-label","audio message");var a=document.createElement("button");a.classList.add("px-2.5","py-2","flex","justify-center","items-center","rounded-[.75rem]","outline-none","transition-all","duration-200","bg-indigo-300","active:bg-indigo-400"),a.setAttribute("title","Play"),a.setAttribute("aria-label","Play"),a.type="button";var o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("xmlns","http://www.w3.org/2000/svg"),o.setAttribute("fill","none"),o.setAttribute("viewBox","0 0 24 24"),o.setAttribute("stroke-width","1.5"),o.setAttribute("stroke","currentColor"),o.setAttribute("aria-hidden","true"),o.classList.add("w-3.5","h-3.5","text-white");var i=document.createElementNS("http://www.w3.org/2000/svg","path");i.setAttribute("stroke-linecap","round"),i.setAttribute("stroke-linejoin","round"),i.setAttribute("d","M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"),o.appendChild(i);var s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("xmlns","http://www.w3.org/2000/svg"),s.setAttribute("fill","none"),s.setAttribute("viewBox","0 0 24 24"),s.setAttribute("stroke-width","1.5"),s.setAttribute("stroke","currentColor"),s.setAttribute("aria-hidden","true"),s.classList.add("hidden","w-3.5","h-3.5","text-white");var c=document.createElementNS("http://www.w3.org/2000/svg","rect");c.setAttribute("width","12"),c.setAttribute("height","12"),c.setAttribute("x","6"),c.setAttribute("y","6"),c.setAttribute("stroke","currentColor"),c.setAttribute("stroke-linejoin","round"),c.setAttribute("stroke-width","2"),c.setAttribute("rx","1"),s.appendChild(c),a.appendChild(o),a.appendChild(s);var l=document.createElement("div");l.classList.add("w-36");var d=u.A.create({container:l,waveColor:"rgb(200, 0, 200)",hideScrollbar:!0,autoCenter:!0,height:30,barHeight:25,barWidth:1.5,cursorWidth:0,url:e}),p=document.createElement("p");p.classList.add("outline-none","text-xs","font-light","leading-4","tracking-[.01rem]","text-black","dark:text-white","opacity-80","dark:opacity-90"),p.setAttribute("tabindex","0"),p.setAttribute("aria-label","00:00"),a.onclick=function(){return d.playPause()},d.on("ready",(function(e){var t=d.getDuration(),r=Math.floor(t/60),n=Math.floor(t%60),a="0".concat(r,":").concat(n.toString().padStart(2,"0"));p.textContent=a})),d.on("finish",(function(){d.seekTo(0)})),d.on("pause",(function(){o.classList.remove("hidden"),s.classList.add("hidden")})),d.on("play",(function(){o.classList.add("hidden"),s.classList.remove("hidden")})),d.on("timeupdate",(function(e){var t=Math.abs(d.getDuration()-e),r=Math.floor(t/60),n=Math.floor(t%60),a="0".concat(r,":").concat(n.toString().padStart(2,"0"));p.textContent=a}));var f=n.createProgressSvgElemet();return r.appendChild(f),r.appendChild(a),r.appendChild(l),r.appendChild(p),t.appendChild(r),t})),w(k,"createImageMessageElement",(function(e){var t=document.createElement("div");t.className="outline-none cursor-pointer";var r=document.createElement("div");r.setAttribute("url",e),r.className="image relative rounded bg-cover bg-center w-56 h-56",r.style.backgroundImage='url("'.concat(e,'")');var a=n.createProgressSvgElemet(),o=document.createElement("div");return o.className="w-full h-full flex justify-center items-center rounded bg-black bg-opacity-20 hover:bg-opacity-10 transition duration-200",r.appendChild(a),r.appendChild(o),t.appendChild(r),t})),w(k,"setForwardUserUiDefaults",(function(e){e.forEach((function(e,t){var r=t,n=document.getElementById("forward-user-svg-sent-".concat(r)),a=document.getElementById("forward-user-svg-default-".concat(r)),o=document.getElementById("forward-user-span-text-".concat(r)),i=document.getElementById("forward-user-button-".concat(r));i.removeAttribute("disabled"),i.classList.remove("cursor-not-allowed"),n.classList.add("hidden"),a.classList.remove("hidden"),o.textContent="Send"}))})),w(k,"createVerticalThreeDotsOptionsElement",(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=n;function o(e){for(var t=e;t.parentNode&&!t.getAttribute("messageId");)t=t.parentNode;return t}var i=document.createElement("div"),s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.classList.add("w-5","h-5","text-neutral-400"),s.setAttribute("aria-hidden","true"),s.setAttribute("fill","currentColor"),s.setAttribute("viewBox","0 0 24 24");var u=document.createElementNS("http://www.w3.org/2000/svg","path");u.setAttribute("d","M3.5 1.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm0 6.041a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm0 5.959a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"),s.appendChild(u);var d=function(e,n){var i=document.createElement("div"),s=new l.ms(i,e,{placement:n});i.classList.add("hidden","top-0","absolute","z-[100]","w-[12.5rem]","mt-2","rounded-sm","bg-white","dark:bg-gray-800","shadow-lg","border","border-gray-100","dark:border-gray-600","focus:outline-none"),i.setAttribute("role","menu"),i.setAttribute("aria-orientation","vertical"),i.setAttribute("aria-labelledby","menu-button"),i.setAttribute("tabindex","-1");var u=[{label:"Reply",iconPath:"M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"},{label:"Copy",iconPath:"M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.373-.03.748-.057 1.123-.08M15.75 18H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08M15.75 18.75v-1.875a3.375 3.375 0 00-3.375-3.375h-1.5a1.125 1.125 0 01-1.125-1.125v-1.5A3.375 3.375 0 006.375 7.5H5.25m11.9-3.664A2.251 2.251 0 0015 2.25h-1.5a2.251 2.251 0 00-2.15 1.586m5.8 0c.065.21.1.433.1.664v.75h-6V4.5c0-.231.035-.454.1-.664M6.75 7.5H4.875c-.621 0-1.125.504-1.125 1.125v12c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V16.5a9 9 0 00-9-9z"},{label:"Forward",iconPath:"M4.248 19C3.22 15.77 5.275 8.232 12.466 8.232V6.079a1.025 1.025 0 0 1 1.644-.862l5.479 4.307a1.108 1.108 0 0 1 0 1.723l-5.48 4.307a1.026 1.026 0 0 1-1.643-.861v-2.154C5.275 13.616 4.248 19 4.248 19Z"}];return t!=E.AUDIO&&t!=E.IMAGE||u.splice(1,1),r||u.push({label:"Delete Message",iconPath:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"}),u.forEach((function(e){var r=document.createElement("button");r.classList.add("w-full","px-4","py-3","flex","items-center","border-b","opacity-60","dark:opacity-70","outline-none","text-sm","border-gray-200","dark:border-gray-600","transition-all","duration-200","text-black","hover:bg-gray-50","dark:hover:bg-gray-600","active:bg-gray-100","dark:focus:bg-gray-600"),"Delete Message"===e.label?r.classList.add("text-red-500","hover:bg-red-50","dark:hover:text-red-50","active:bg-red-100","dark:hover:bg-red-900"):r.classList.add("dark:text-white");var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("xmlns","http://www.w3.org/2000/svg"),n.setAttribute("fill","none"),n.setAttribute("viewBox","0 0 24 24"),n.setAttribute("stroke-width","1.5"),n.setAttribute("stroke","currentColor"),n.setAttribute("aria-hidden","true"),n.classList.add("h-5","w-5","mr-3");var u=document.createElementNS("http://www.w3.org/2000/svg","path");u.setAttribute("stroke-linecap","round"),u.setAttribute("stroke-linejoin","round"),u.setAttribute("d",e.iconPath),n.appendChild(u),r.appendChild(n),r.appendChild(document.createTextNode(e.label)),r.onclick=g(m().mark((function n(){var i,u,l,d,p,f,h,g,v,y;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s.hide(),"Reply"!=e.label){n.next=4;break}n.next=43;break;case 4:if("Copy"!=e.label){n.next=11;break}return i=o(r),u=JSON.parse(i.getAttribute("messageData")),n.next=9,i.copyTextMessageCallback(u.content);case 9:n.next=43;break;case 11:if("Forward"!=e.label){n.next=42;break}if(l=document.getElementById("static-modal-forward-users-list-button"),d=o(r),p=JSON.parse(d.getAttribute("messageData")),l.click(),t!=E.TEXT){n.next=20;break}d.forwardMessageCallback(t,p.content,null,null,null,null,null,null,null),n.next=40;break;case 20:if(t!=E.AUDIO){n.next=30;break}return n.next=23,fetch(p.content);case 23:return f=n.sent,n.next=26,f.blob();case 26:h=n.sent,d.forwardMessageCallback(t,null,h,null,null,null,null,null,null),n.next=40;break;case 30:if(t!=E.IMAGE){n.next=40;break}return n.next=33,fetch(p.content);case 33:return g=n.sent,n.next=36,g.blob();case 36:v=n.sent,(y=document.createElement("img")).src=URL.createObjectURL(v),y.onload=function(){var e=y.width,r=y.height,n=v.type,o=n.split("/")[1],i=c().MD5(a.generateRandomString(16)).toString()+"."+o,s=c().MD5(a.generateRandomString(16)).toString()+"."+o;d.forwardMessageCallback(t,null,v,i,e,r,n,o,s)};case 40:n.next=43;break;case 42:e.label;case 43:case"end":return n.stop()}}),n)}))),i.appendChild(r)})),[i,s]}(i,e),f=p(d,2),h=f[0],v=f[1];return i.classList.add("invisible","cursor-pointer"),i.appendChild(s),i.onclick=function(){v.show()},[i,h]})),w(k,"createOutgoingMessageTextElement",(function(e,t,r){var a=document.createElement("div");a.setAttribute("timestamp",t);var o=document.createElement("div");o.classList.add("select-none");var i=document.createElement("div");i.classList.add("flex","justify-end");var s=document.createElement("div");s.classList.add("mr-4");var c=document.createElement("div");c.classList.add("flex","relative","items-end");var u=document.createElement("div");u.classList.add("chat-message-container","group","max-w-[31.25rem]","p-4","transition","duration-500","rounded","rounded-br-none","order-2","bg-indigo-50","dark:bg-gray-600");var l=document.createElement("p");l.classList.add("whitespace-pre-wrap","break-all","text-sm","font-normal","leading-4","tracking-[.01rem]","outline-none","text-black","opacity-80","dark:text-white","dark:opacity-90"),l.setAttribute("tabindex","0"),l.textContent=e,u.appendChild(l);var d=document.createElement("div");d.classList.add("ml-1.5","order-1");var f=document.createElement("p");f.classList.add("hidden","flex","justify-end","outline-none","text-xs","text-black","opacity-80","dark:text-white","dark:opacity-90","font-light","leading-4","tracking-[.01rem]","whitespace-pre"),f.textContent=t,n.setMessageTextElementTimeAgo(f,t,r),a.appendChild(f);var m=document.createElement("div"),h=p(n.createVerticalThreeDotsOptionsElement("top-end",E.TEXT),2),g=h[0],v=h[1];m.style.height="100%",m.classList.add("flex","flex-col","justify-between","items-center");var y=document.createElement("img");return y.src="/gray_checks.svg",y.classList.add("w-[.875rem]","h-[.875rem]","img-check"),m.appendChild(g),m.appendChild(y),m.appendChild(v),c.appendChild(u),c.appendChild(d),c.appendChild(m),i.appendChild(s),i.appendChild(c),o.appendChild(i),a.appendChild(o),a.onclick=function(){f.classList.remove("hidden"),g.classList.remove("invisible")},a})),w(k,"createOutgoingMessageVoiceElement",(function(e,t,r){var a=document.createElement("div");a.setAttribute("timestamp",t);var o=document.createElement("div");o.classList.add("select-none");var i=document.createElement("div");i.classList.add("flex","justify-end");var s=document.createElement("div");s.classList.add("mr-4");var c=document.createElement("div");c.classList.add("flex","items-end");var u=document.createElement("div");u.classList.add("chat-message-container","group","max-w-[31.25rem]","p-4","transition","duration-500","rounded","rounded-br-none","order-2","bg-indigo-50","dark:bg-gray-600");var l=document.createElement("p");l.classList.add("whitespace-pre-wrap","break-all","text-sm","font-normal","leading-4","tracking-[.01rem]","outline-none","text-black","opacity-80","dark:text-white","dark:opacity-90"),l.setAttribute("tabindex","0");var d=n.createVoiceMessageElement(e);u.appendChild(d);var f=document.createElement("div");f.classList.add("ml-1.5","order-1");var m=document.createElement("p");m.classList.add("hidden","flex","justify-end","outline-none","text-xs","text-black","opacity-80","dark:text-white","dark:opacity-90","font-light","leading-4","tracking-[.01rem]","whitespace-pre"),m.textContent=t,n.setMessageTextElementTimeAgo(m,t,r),a.appendChild(m);var h=document.createElement("div"),g=p(n.createVerticalThreeDotsOptionsElement("top-end",E.AUDIO),2),v=g[0],y=g[1];h.style.height="100%",h.classList.add("flex","flex-col","justify-between","items-center");var b=document.createElement("img");return b.src="/gray_checks.svg",b.classList.add("w-[.875rem]","h-[.875rem]","img-check"),h.appendChild(v),h.appendChild(b),h.appendChild(y),c.appendChild(u),c.appendChild(f),c.appendChild(h),i.appendChild(s),i.appendChild(c),o.appendChild(i),a.appendChild(o),a.onclick=function(){m.classList.remove("hidden"),v.classList.remove("invisible")},a})),w(k,"createOutgoingMessageImageElement",(function(e,t,r){var a=document.createElement("div");a.setAttribute("timestamp",t);var o=document.createElement("div");o.classList.add("select-none");var i=document.createElement("div");i.classList.add("flex","justify-end");var s=document.createElement("div");s.classList.add("mr-4");var c=document.createElement("div");c.classList.add("flex","relative","items-end");var u=document.createElement("div");u.classList.add("chat-message-container","group","max-w-[31.25rem]","transition","duration-500","rounded","rounded-br-none","order-2","bg-indigo-50","dark:bg-gray-600");var l=n.createImageMessageElement(e);u.appendChild(l);var d=document.createElement("div");d.classList.add("ml-1.5","order-1");var f=document.createElement("p");f.classList.add("hidden","flex","justify-end","outline-none","text-xs","text-black","opacity-80","dark:text-white","dark:opacity-90","font-light","leading-4","tracking-[.01rem]","whitespace-pre"),f.textContent=t,n.setMessageTextElementTimeAgo(f,t,r),a.appendChild(f);var m=document.createElement("div"),h=p(n.createVerticalThreeDotsOptionsElement("top-end",E.IMAGE),2),g=h[0],v=h[1];m.style.height="100%",m.classList.add("flex","flex-col","justify-between","items-center");var y=document.createElement("img");return y.src="/gray_checks.svg",y.classList.add("w-[.875rem]","h-[.875rem]","img-check"),m.appendChild(g),m.appendChild(y),m.appendChild(v),c.appendChild(u),c.appendChild(d),c.appendChild(m),i.appendChild(s),i.appendChild(c),o.appendChild(i),a.appendChild(o),a.onclick=function(){f.classList.remove("hidden"),g.classList.remove("invisible")},a})),w(k,"createIncomingMessageTextElement",(function(e,t,r,a){var o=document.createElement("div");o.setAttribute("timestamp",r);var i=document.createElement("div");i.classList.add("select-none");var s=document.createElement("div");s.classList.add("flex");var c=document.createElement("div");c.classList.add("mr-4","flex","items-end");var u=document.createElement("div");u.classList.add("outline-none");var l=document.createElement("div");l.classList.add("avatar","w-[2.25rem]","h-[2.25rem]","bg-cover","bg-center","rounded-full"),l.style.backgroundImage='url("'.concat(t,'")'),u.appendChild(l),c.appendChild(u);var d=document.createElement("div");d.classList.add("flex","items-end");var f=document.createElement("div");f.classList.add("chat-message-container","group","max-w-[31.25rem]","p-4","transition","duration-500","rounded","rounded-bl-none","mr-4","bg-gray-100","dark:bg-gray-600");var m=document.createElement("p");m.classList.add("whitespace-pre-wrap","break-all","text-sm","font-normal","leading-4","tracking-[.01rem]","outline-none","text-black","opacity-80","dark:text-white","dark:opacity-90"),m.setAttribute("tabindex","0"),m.textContent=e,f.appendChild(m);var h=document.createElement("div"),g=document.createElement("p");g.classList.add("hidden","pl-12","outline-none","text-xs","text-black","opacity-80","dark:text-white","dark:opacity-90","font-light","leading-4","tracking-[.01rem]","whitespace-pre"),g.textContent=r,n.setMessageTextElementTimeAgo(g,r,a),o.append(g);var v=p(n.createVerticalThreeDotsOptionsElement("top-start",E.TEXT,!0),2),y=v[0],b=v[1];return d.appendChild(f),d.appendChild(h),s.appendChild(c),s.appendChild(d),s.appendChild(y),s.appendChild(b),i.appendChild(s),o.appendChild(i),o.onclick=function(){g.classList.remove("hidden"),y.classList.remove("invisible")},o})),w(k,"createIncomingMessageVoiceElement",(function(e,t,r,a){var o=document.createElement("div");o.setAttribute("timestamp",r);var i=document.createElement("div");i.classList.add("select-none");var s=document.createElement("div");s.classList.add("flex");var c=document.createElement("div");c.classList.add("mr-4","flex","items-end");var u=document.createElement("div");u.classList.add("outline-none");var l=document.createElement("div");l.classList.add("avatar","w-[2.25rem]","h-[2.25rem]","bg-cover","bg-center","rounded-full"),l.style.backgroundImage='url("'.concat(t,'")'),u.appendChild(l),c.appendChild(u);var d=document.createElement("div");d.classList.add("flex","items-end");var f=document.createElement("div");f.classList.add("chat-message-container","group","max-w-[31.25rem]","p-4","transition","duration-500","rounded","rounded-bl-none","mr-4","bg-gray-100","dark:bg-gray-600");var m=document.createElement("p");m.classList.add("whitespace-pre-wrap","break-all","text-sm","font-normal","leading-4","tracking-[.01rem]","outline-none","text-black","opacity-80","dark:text-white","dark:opacity-90"),m.setAttribute("tabindex","0");var h=n.createVoiceMessageElement(e);f.appendChild(h);var g=document.createElement("div"),v=document.createElement("p");v.classList.add("hidden","pl-12","outline-none","text-xs","text-black","opacity-80","dark:text-white","dark:opacity-90","font-light","leading-4","tracking-[.01rem]","whitespace-pre"),v.textContent=r,n.setMessageTextElementTimeAgo(v,r,a),o.append(v);var y=p(n.createVerticalThreeDotsOptionsElement("top-start",E.AUDIO,!0),2),b=y[0],w=y[1];return d.appendChild(f),d.appendChild(g),s.appendChild(c),s.appendChild(d),s.appendChild(b),s.appendChild(w),i.appendChild(s),o.appendChild(i),o.onclick=function(){v.classList.remove("hidden"),b.classList.remove("invisible")},o})),w(k,"createIncommingMessageImageElement",(function(e,t,r,a){var o=document.createElement("div");o.setAttribute("timestamp",r);var i=document.createElement("div");i.classList.add("select-none");var s=document.createElement("div");s.classList.add("flex");var c=document.createElement("div");c.classList.add("mr-4","flex","items-end");var u=document.createElement("div");u.classList.add("outline-none");var l=document.createElement("div");l.classList.add("avatar","w-[2.25rem]","h-[2.25rem]","bg-cover","bg-center","rounded-full"),l.style.backgroundImage='url("'.concat(t,'")'),u.appendChild(l),c.appendChild(u);var d=document.createElement("div");d.classList.add("flex","items-end");var f=document.createElement("div");f.classList.add("chat-message-container","group","max-w-[31.25rem]","transition","duration-500","rounded","rounded-bl-none","mr-4","bg-gray-100","dark:bg-gray-600");var m=n.createImageMessageElement(e);f.appendChild(m);var h=document.createElement("div"),g=document.createElement("p");g.classList.add("hidden","pl-12","outline-none","text-xs","text-black","opacity-80","dark:text-white","dark:opacity-90","font-light","leading-4","tracking-[.01rem]","whitespace-pre"),g.textContent=r,n.setMessageTextElementTimeAgo(g,r,a),o.append(g);var v=p(n.createVerticalThreeDotsOptionsElement("top-start",E.IMAGE,!0),2),y=v[0],b=v[1];return d.appendChild(f),d.appendChild(h),s.appendChild(c),s.appendChild(d),s.appendChild(y),s.appendChild(b),i.appendChild(s),o.appendChild(i),o.onclick=function(){g.classList.remove("hidden"),y.classList.remove("invisible")},o}));var L=r(1083);function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function C(){C=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var o=t&&t.prototype instanceof v?t:v,i=Object.create(o.prototype),s=new j(n||[]);return a(i,"_invoke",{value:A(e,r,s)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",f="suspendedYield",m="executing",h="completed",g={};function v(){}function y(){}function b(){}var w={};u(w,i,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(B([])));E&&E!==r&&n.call(E,i)&&(w=E);var k=b.prototype=v.prototype=Object.create(w);function L(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function r(a,o,i,s){var c=d(e[a],e,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==M(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(l).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,s)}))}s(c.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var a=p;return function(o,i){if(a===m)throw Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var c=T(s,n);if(c){if(c===g)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===p)throw a=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=m;var u=d(t,r,n);if("normal"===u.type){if(a=n.done?h:f,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=h,n.method="throw",n.arg=u.arg)}}}function T(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var o=d(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function B(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(M(t)+" is not iterable")}return y.prototype=b,a(k,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},L(I.prototype),u(I.prototype,s,(function(){return this})),t.AsyncIterator=I,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new I(l(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},L(k),u(k,c,"Generator"),u(k,i,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=B,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return s.type="throw",s.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:B(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function I(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function A(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){I(o,n,a,i,s,"next",e)}function s(e){I(o,n,a,i,s,"throw",e)}i(void 0)}))}}function T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,j(n.key),n)}}function S(e,t,r){return t&&T(e.prototype,t),r&&T(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function O(e,t,r){return(t=j(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(e){var t=function(e,t){if("object"!=M(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=M(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==M(t)?t:t+""}var B=S((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),O(this,"setEncryptionDetails",function(){var e=A(C().mark((function e(t,r,n,a){var o,i;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=new FormData).append("uid",t),o.append("publickey",r),o.append("privatekey",n),o.append("passphrase",a),e.prev=5,e.next=8,fetch("/set_encryption_details",{method:"POST",body:o});case 8:return i=e.sent,e.next=11,i;case 11:return e.abrupt("return",e.sent);case 14:return e.prev=14,e.t0=e.catch(5),e.abrupt("return",{ok:!1});case 17:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(t,r,n,a){return e.apply(this,arguments)}}()),O(this,"createTextMessage",function(){var e=A(C().mark((function e(t,r,n,a,o,i,s,c){var u,l,d,p=arguments;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=!(p.length>8&&void 0!==p[8])||p[8],(l=new FormData).append("uid",t),l.append("event",r),l.append("channels",n),l.append("sender",a),l.append("receiver",o),l.append("type",i),l.append("content",s),l.append("timestamp",c),l.append("isSaveMessage",u),e.prev=11,e.next=14,fetch("/create_text_message",{method:"POST",body:l});case 14:return d=e.sent,e.next=17,d;case 17:return e.abrupt("return",e.sent);case 20:return e.prev=20,e.t0=e.catch(11),e.abrupt("return",{ok:!1});case 23:case"end":return e.stop()}}),e,null,[[11,20]])})));return function(t,r,n,a,o,i,s,c){return e.apply(this,arguments)}}()),O(this,"createAudioMessage",function(){var e=A(C().mark((function e(t,r,n,a){var o,i;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=new FormData).append("uid",t),o.append("file",r),e.prev=3,e.next=6,L.A.post("/create_audio_message",o,{onUploadProgress:function(e){var t=Math.round(100*e.loaded/e.total);a(n,t)}});case 6:return i=e.sent,a(n,100),e.abrupt("return",i);case 11:return e.prev=11,e.t0=e.catch(3),e.abrupt("return",{status:500});case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t,r,n,a){return e.apply(this,arguments)}}()),O(this,"createImageMessage",function(){var e=A(C().mark((function e(t,r,n,a,o){var i,s;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=new FormData).append("uid",t),i.append("file",r),i.append("extension",n),e.prev=4,e.next=7,L.A.post("/create_image_message",i,{onUploadProgress:function(e){var t=Math.round(100*e.loaded/e.total);o(a,t)}});case 7:return s=e.sent,o(a,100),e.abrupt("return",s);case 12:return e.prev=12,e.t0=e.catch(4),e.abrupt("return",{status:500});case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}()),O(this,"getUserLastSeen",function(){var e=A(C().mark((function e(t,r){var n;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/get_user_last_seen/".concat(t,"/").concat(r),{method:"GET"});case 3:return n=e.sent,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",{ok:!1});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r){return e.apply(this,arguments)}}()),O(this,"createMessage",function(){var e=A(C().mark((function e(t,r,n,a,o,i,s){var c,u;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=new FormData).append("uid",t),c.append("sender",r),c.append("receiver",n),c.append("type",a),c.append("content",o),c.append("timestamp",i),c.append("saveMessages",s),e.prev=8,e.next=11,fetch("/message",{method:"POST",body:c});case 11:return u=e.sent,e.next=14,u;case 14:return e.abrupt("return",e.sent);case 17:return e.prev=17,e.t0=e.catch(8),e.abrupt("return",{ok:!1});case 20:case"end":return e.stop()}}),e,null,[[8,17]])})));return function(t,r,n,a,o,i,s){return e.apply(this,arguments)}}()),O(this,"deleteMessage",function(){var e=A(C().mark((function e(t,r){var n;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/message/".concat(t,"/").concat(r),{method:"DELETE"});case 3:return n=e.sent,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",{ok:!1});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r){return e.apply(this,arguments)}}()),O(this,"createImage",function(){var e=A(C().mark((function e(t,r,n,a){var o,i;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=new FormData).append("uid",t),o.append("sender",r),o.append("file",n),e.prev=4,e.next=7,L.A.post("/image",o,{onUploadProgress:function(e){var t=Math.round(100*e.loaded/e.total);a.setAttribute("stroke-dashoffset","calc(251.2px - (251.2px * ".concat(t-1,") / 100)"))}});case 7:return i=e.sent,e.abrupt("return",i);case 11:return e.prev=11,e.t0=e.catch(4),e.abrupt("return",{status:500});case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t,r,n,a){return e.apply(this,arguments)}}()),O(this,"createAudio",function(){var e=A(C().mark((function e(t,r,n,a){var o,i;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=new FormData).append("uid",t),o.append("sender",r),o.append("file",n),e.prev=4,e.next=7,L.A.post("/audio",o,{onUploadProgress:function(e){var t=Math.round(100*e.loaded/e.total);a.setAttribute("stroke-dashoffset","calc(251.2px - (251.2px * ".concat(t-1,") / 100)"))}});case 7:return i=e.sent,e.abrupt("return",i);case 11:return e.prev=11,e.t0=e.catch(4),e.abrupt("return",{status:500});case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t,r,n,a){return e.apply(this,arguments)}}()),O(this,"setSeenMessage",function(){var e=A(C().mark((function e(t,r,n){var a,o;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("uid",t),a.append("sender",r),a.append("id",n),e.prev=4,e.next=7,fetch("/set_seen_message",{method:"POST",body:a});case 7:return o=e.sent,e.next=10,o;case 10:return e.abrupt("return",e.sent);case 13:return e.prev=13,e.t0=e.catch(4),e.abrupt("return",{ok:!1});case 16:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t,r,n){return e.apply(this,arguments)}}()),O(this,"setPairKey",function(){var e=A(C().mark((function e(t,r,n,a){var o,i;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=new FormData).append("uid",t),o.append("sender",r),o.append("publicKey",n),o.append("privateKey",a),e.prev=5,e.next=8,fetch("/set_pairkey",{method:"POST",body:o});case 8:return i=e.sent,e.next=11,i;case 11:return e.abrupt("return",e.sent);case 14:return e.prev=14,e.t0=e.catch(5),e.abrupt("return",{ok:!1});case 17:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(t,r,n,a){return e.apply(this,arguments)}}()),O(this,"getPrivateKey",function(){var e=A(C().mark((function e(t,r){var n;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/get_private_key/".concat(t,"/").concat(r),{method:"GET"});case 3:return n=e.sent,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",{ok:!1});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r){return e.apply(this,arguments)}}()),O(this,"getMessages",function(){var e=A(C().mark((function e(t,r,n,a,o){var i,s,c=arguments;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=c.length>5&&void 0!==c[5]?c[5]:0,e.prev=1,e.next=4,fetch("/get_messages/".concat(t,"/").concat(r,"/").concat(n,"/").concat(a,"/").concat(o,"/").concat(i),{method:"GET"});case 4:return s=e.sent,e.next=7,s;case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",{ok:!1});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}()),O(this,"getLastMessages",function(){var e=A(C().mark((function e(t,r){var n;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/get_last_messages/".concat(t,"/").concat(r),{method:"GET"});case 3:return n=e.sent,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",{ok:!1});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r){return e.apply(this,arguments)}}()),O(this,"getUsers",function(){var e=A(C().mark((function e(t){var r;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/get_users/".concat(t),{method:"GET"});case 3:return r=e.sent,e.next=6,r;case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",{ok:!1});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),O(this,"getFirebaseConfig",function(){var e=A(C().mark((function e(t){var r;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/get_firebase_config/".concat(t),{method:"GET"});case 3:return r=e.sent,e.next=6,r;case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",{ok:!1});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())})),P=r(4203),U=r(8199),_=r(3891),D=r.n(_),N=r(6479),V=r.n(N),G=r(7147),F=r(1013),R=r(8816),H=r.n(R),J=r(9411);r(9308);function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function X(){X=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var o=t&&t.prototype instanceof v?t:v,i=Object.create(o.prototype),s=new S(n||[]);return a(i,"_invoke",{value:C(e,r,s)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",f="suspendedYield",m="executing",h="completed",g={};function v(){}function y(){}function b(){}var w={};u(w,i,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(O([])));E&&E!==r&&n.call(E,i)&&(w=E);var k=b.prototype=v.prototype=Object.create(w);function L(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function M(e,t){function r(a,o,i,s){var c=d(e[a],e,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==K(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(l).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,s)}))}s(c.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function C(t,r,n){var a=p;return function(o,i){if(a===m)throw Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var c=I(s,n);if(c){if(c===g)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===p)throw a=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=m;var u=d(t,r,n);if("normal"===u.type){if(a=n.done?h:f,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=h,n.method="throw",n.arg=u.arg)}}}function I(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,I(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var o=d(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function O(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(K(t)+" is not iterable")}return y.prototype=b,a(k,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},L(M.prototype),u(M.prototype,s,(function(){return this})),t.AsyncIterator=M,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new M(l(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},L(k),u(k,c,"Generator"),u(k,i,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=O,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return s.type="throw",s.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;T(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:O(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function q(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function z(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){q(o,n,a,i,s,"next",e)}function s(e){q(o,n,a,i,s,"throw",e)}i(void 0)}))}}function W(e,t,r){return t=Z(t),function(e,t){if(t&&("object"==K(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Y()?Reflect.construct(t,r||[],Z(e).constructor):t.apply(e,r))}function Y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Y=function(){return!!e})()}function Z(e){return Z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Z(e)}function $(e,t){return $=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$(e,t)}function Q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ne(n.key),n)}}function te(e,t,r){return t&&ee(e.prototype,t),r&&ee(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function re(e,t,r){return(t=ne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ne(e){var t=function(e,t){if("object"!=K(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=K(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==K(t)?t:t+""}var ae=function(){return te((function e(){Q(this,e)}),null,[{key:"TEXT",get:function(){return TEXT}},{key:"IMAGE",get:function(){return IMAGE}},{key:"GIF",get:function(){return GIF}}])}();re(ae,"TEXT",0),re(ae,"IMAGE",1),re(ae,"GIF",2),re(ae,"AUDIO",3);var oe=function(e){function t(){var e;Q(this,t);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return re(e=W(this,t,[].concat(n)),"connect",z(X().mark((function t(){var r,n;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return F.A.addDefaultLocale(J.A),V().logToConsole=!1,e.pusher=new(V())("7c4d952c51d2be9a8302",{cluster:"ap1",authEndpoint:"/pusher_auth",auth:{params:{uid:e.uidValue}}}),e.page=1,e.pageSize=20,e.service=new B,e.timeAgo=new F.A("en-US"),e.audioBlob=null,e.isVoiceRecording=!1,e.isCloseVoiceRecording=!0,e.isReceivedFirstMessage=!1,e.isLockInfiniteScrolling=!1,e.usersOnlineMap=new Map,e.usersMap=new Map,e.toSendImagesMap=new Map,e.ffmpeg=new P.m,e.viewer=new(D())(document.getElementById("viewerjs-images-container")),e.forwardUserMessageType=null,e.forwardUserMessageContent=null,e.forwardUserMessageBlob=null,e.forwardUserMessageInput=null,e.forwardUserMessageWidth=null,e.forwardUserMessageHeight=null,e.forwardUserMessageMimeType=null,e.forwardUserMessageExtension=null,e.forwardUserMessageOutput=null,t.t0=e.ffmpeg,t.next=29,(0,U.KA)("/ffmpeg-core.js","text/javascript");case 29:return t.t1=t.sent,t.next=32,(0,U.KA)("/ffmpeg-core.wasm","application/wasm");case 32:return t.t2=t.sent,t.t3={coreURL:t.t1,wasmURL:t.t2},t.next=36,t.t0.load.call(t.t0,t.t3);case 36:return t.next=38,e.service.getUsers(e.uidValue);case 38:if(!(r=t.sent).ok){t.next=61;break}return t.next=42,r.json();case 42:return n=t.sent,e.setDarkModeToggle(),e.setEmojiPickerElement(),e.setImageButtonClick(),e.setOnChangeImageFileInput(),e.setSendTextButtonClick(),e.setSendVoiceButtonClick(),e.setSendImageButtonClick(),e.setUserPusherPresenceChannel(),e.setSendMessageChatboxInputKeyDown(),e.setVoiceChatRecording(),e.setChatboxEventListener(),n.forEach(function(){var t=z(X().mark((function t(r){return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.usersMap.set(r.id,r),e.setForwardUserId(r),t.next=4,e.setSidebarUserClickEvent(r);case 4:return t.next=6,e.setUserPusherMessagesChannel(r);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=57,e.setEncryptionDetails();case 57:return t.next=59,e.setUserLastMessage();case 59:return t.next=61,e.setChatboxInfiniteScrolling();case 61:case"end":return t.stop()}}),t)})))),re(e,"setEncryptionDetails",z(X().mark((function t(){var r,n,a,o,i;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.passphraseValue){t.next=13;break}return r=c().lib.WordArray.random(16),n=r.toString(c().enc.Hex),t.next=5,k.generateEncryptionKeyPair();case 5:return a=t.sent,o=k.arrayBufferToBase64(a.publicKey),i=c().AES.encrypt(k.arrayBufferToBase64(a.privateKey),n),t.next=10,e.service.setEncryptionDetails(e.uidValue,o,i,n);case 10:window.location.href="/",t.next=15;break;case 13:e.currentUserPublickey=k.base64ToArrayBuffer(e.publickeyValue),e.currentUserPrivatekey=k.base64ToArrayBuffer(c().AES.decrypt(e.privatekeyValue,e.passphraseValue).toString(c().enc.Utf8));case 15:case"end":return t.stop()}}),t)})))),re(e,"setUserPusherMessagesChannel",function(){var t=z(X().mark((function t(r){var n;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=document.getElementById("chatbox"),e.pusher.subscribe("".concat(r.id,"-").concat(e.currentUserValue.id)).bind("messages/".concat(r.id,"/").concat(e.currentUserValue.id),function(){var t=z(X().mark((function t(a){var o,i,s,c,u,l,d,p;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=a.id,i=a.content,a.isSeen,s=JSON.parse(atob(i)),s.sender,c=s.receiver,t.t0=JSON,t.next=5,k.decryptMessage(e.currentUserPrivatekey,c);case 5:t.t1=t.sent,(u=t.t0.parse.call(t.t0,t.t1)).sender==e.userToChatId&&(l=null,u.type==ae.TEXT?l=k.createIncomingMessageTextElement(u.content,r.userDetails.avatar,u.timestamp,e.timeAgo):u.type==ae.AUDIO?l=k.createIncomingMessageVoiceElement(u.content,r.userDetails.avatar,u.timestamp,e.timeAgo):u.type==ae.IMAGE&&(l=k.createIncommingMessageImageElement(u.content,r.userDetails.avatar,u.timestamp,e.timeAgo),k.setViewerJsImageElement(l,e.viewer)),l.setAttribute("messageId",o),l.setAttribute("messageData",JSON.stringify(u)),l.copyTextMessageCallback=e.copyTextMessageCallback,l.forwardMessageCallback=e.forwardMessageCallback,e.chatboxScrollToBottom(),n.appendChild(l),k.reOrderLastFourChatboxElements(),k.setChatboxMessageAvatarHidden(),k.setChatboxDividerTimestamp(),k.setChatboxMessageBorderAndMargin()),u.type==ae.TEXT?k.setUserLastMessageContent(u.sender,u.content):u.type==ae.AUDIO?(d=e.usersMap.get(u.sender).userDetails.firstname,k.setUserLastMessageContent(u.sender,d+" sent an audio")):u.type==ae.IMAGE&&(p=e.usersMap.get(u.sender).userDetails.firstname,k.setUserLastMessageContent(u.sender,p+" sent an image")),k.setUserLastMessageTimestamp(u.sender,u.timestamp),k.setUserLastMessageTimeAgo(u.sender,u.timestamp,e.timeAgo),k.reOrderUsersListIfNewMessageIsBeingSentOrReceived(u.sender);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=5,e.sleep(1);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),re(e,"setUserPusherPresenceChannel",(function(){var t=e,r=e.pusher.subscribe("presence-online-users");r.bind("pusher:subscription_succeeded",(function(e){e.each((function(e){var r=e.info.id,n=document.getElementById("user".concat(r,"-online-status"));n.classList.remove("bg-red-400"),n.classList.add("bg-green-400"),t.usersOnlineMap.set(r,!0)}))})),r.bind("pusher:member_added",(function(e){var r=e.info.id,n=document.getElementById("user".concat(r,"-online-status"));if(n.classList.remove("bg-red-400"),n.classList.add("bg-green-400"),r==t.userToChatId){var a=document.getElementById("usertochat-online-status"),o=document.getElementById("usertochat-online-text");a.classList.remove("bg-red-400"),a.classList.add("bg-green-400"),o.textContent="Active now"}t.usersOnlineMap.set(r,!0)})),r.bind("pusher:member_removed",(function(e){var r=e.info.id,n=document.getElementById("user".concat(r,"-online-status"));if(n.classList.add("bg-red-400"),n.classList.remove("bg-green-400"),r==t.userToChatId){var a=document.getElementById("usertochat-online-status"),o=document.getElementById("usertochat-online-text");a.classList.remove("bg-green-400"),a.classList.add("bg-red-400"),o.textContent="Offline"}t.usersOnlineMap.set(r,!1)}))})),re(e,"setSidebarUserClickEvent",function(){var t=z(X().mark((function t(r){return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return document.getElementById("user".concat(r.id)).onclick=z(X().mark((function t(){var n,a,o;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(r.userDetails.firstname," ").concat(r.userDetails.lastname),a=r.userDetails.avatar,o=r.userDetails.publickey.publickey,e.userTochatPublickey=k.base64ToArrayBuffer(o),e.userToChatId=r.id,e.isSidebarUserClickOnce=!0,e.setUserToChatName(n),e.setUserToChatAvatar(a),e.setSidebarUserToggleForMobile(),e.setMainChatbox(),e.setDefaultValues(),t.next=13,e.setConversations();case 13:e.setUserToChatOnlineStatus();case 14:case"end":return t.stop()}}),t)}))),t.next=4,e.sleep(1);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),re(e,"setVoiceChatRecording",(function(){var t=document.getElementById("voicechat-record-button");t.onclick=z(X().mark((function r(){var n,a,o,i,s,c,l,d,p,f,m,h,g;return X().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.toSendImagesMap.size){r.next=32;break}return(n=document.getElementById("waveform-input")).textContent="",a=u.A.create({container:n,waveColor:"rgb(200, 0, 200)",hideScrollbar:!0,autoCenter:!0,height:30,barHeight:25,barWidth:1.5,cursorWidth:0}),e.audioBlob=null,e.isVoiceRecording=!0,e.isCloseVoiceRecording=!1,o=document.getElementById("chatbox-message-input"),i=document.getElementById("send-text-button"),s=document.getElementById("send-voice-button"),c=document.getElementById("chatbox-voice-input"),l=document.getElementById("voicechat-record-time"),d=document.getElementById("voicechat-record-start"),p=document.getElementById("voicechat-record-svg-play"),f=document.getElementById("voicechat-record-svg-stop"),m=document.getElementById("voicechat-record-delete"),h=document.getElementById("voicechat-record-close"),o.classList.add("hidden"),c.classList.remove("hidden"),i.classList.add("hidden"),s.classList.remove("hidden"),a.empty(),(g=a.registerPlugin(G.A.create({scrollingWaveform:!1,renderRecordedAudio:!1}))).on("record-end",function(){var t=z(X().mark((function t(r){var o;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=URL.createObjectURL(r),a.destroy(),a=u.A.create({container:n,waveColor:"rgb(200, 0, 200)",progressColor:"rgb(100, 50, 0)",hideScrollbar:!0,autoCenter:!0,height:30,barHeight:25,barWidth:1.5,cursorWidth:0,url:o}),d.onclick=function(){return a.playPause()},a.on("pause",(function(){p.classList.remove("hidden"),f.classList.add("hidden")})),a.on("play",(function(){p.classList.add("hidden"),f.classList.remove("hidden")})),a.on("timeupdate",(function(e){var t=Math.abs(a.getDuration()-e),r=Math.floor(t/60),n=Math.floor(t%60),o="0".concat(r,":").concat(n.toString().padStart(2,"0"));l.textContent=o})),a.on("finish",(function(){a.seekTo(0)})),e.audioBlob=r,e.isVoiceRecording=!1;case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),g.on("record-progress",(function(e){if(parseInt(e/1e3)>=61)d.click();else{var t=[Math.floor(e%36e5/6e4),Math.floor(e%6e4/1e3)].map((function(e){return e<10?"0"+e:e})).join(":");l.textContent=t}})),d.onclick=function(){g.stopRecording(),p.classList.remove("hidden"),f.classList.add("hidden"),m.classList.remove("hidden"),h.classList.add("hidden")},m.onclick=z(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.classList.add("hidden"),f.classList.remove("hidden"),m.classList.add("hidden"),h.classList.remove("hidden"),a.empty(),a.destroy(),t.click(),e.next=9,g.startRecording();case 9:case"end":return e.stop()}}),e)}))),h.onclick=function(){e.isVoiceRecording=!1,e.isCloseVoiceRecording=!0,a.empty(),a.destroy(),g.destroy(),k.unHideMediaGroup(),o.classList.remove("hidden"),c.classList.add("hidden"),i.classList.remove("hidden"),s.classList.add("hidden"),g.stopRecording()},k.hideMediaGroup(),r.next=32,g.startRecording();case 32:case"end":return r.stop()}}),r)})))})),re(e,"setUserLastMessage",z(X().mark((function t(){var r,n,a,o,i,s,c,u,l,d,p,f;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.service.getLastMessages(e.uidValue,e.currentUserValue.id);case 2:if(!(r=t.sent).ok){t.next=40;break}return t.next=6,r.json();case 6:n=t.sent,a=0;case 8:if(!(a<n.length)){t.next=40;break}return o=n[a],o.id,i=o.content,o.isSeen,s=JSON.parse(atob(i)),c=s.sender,u=s.receiver,t.prev=11,t.t0=JSON,t.next=15,k.decryptMessage(e.currentUserPrivatekey,c);case 15:t.t1=t.sent,(l=t.t0.parse.call(t.t0,t.t1)).type==ae.TEXT?k.setUserLastMessageContent(l.receiver,l.content):l.type==ae.AUDIO?k.setUserLastMessageContent(l.receiver,"You sent an audio"):l.type==ae.IMAGE&&k.setUserLastMessageContent(l.receiver,"You sent an image"),k.setUserLastMessageTimestamp(l.receiver,l.timestamp),k.setUserLastMessageTimeAgo(l.receiver,l.timestamp,e.timeAgo),t.next=37;break;case 22:return t.prev=22,t.t2=t.catch(11),t.prev=24,t.t3=JSON,t.next=28,k.decryptMessage(e.currentUserPrivatekey,u);case 28:t.t4=t.sent,(d=t.t3.parse.call(t.t3,t.t4)).type==ae.TEXT?k.setUserLastMessageContent(d.sender,d.content):d.type==ae.AUDIO?(p=e.usersMap.get(d.sender).userDetails.firstname,k.setUserLastMessageContent(d.sender,p+" sent an audio")):d.type==ae.IMAGE&&(f=e.usersMap.get(d.sender).userDetails.firstname,k.setUserLastMessageContent(d.sender,f+" sent an image")),k.setUserLastMessageTimestamp(d.sender,d.timestamp),k.setUserLastMessageTimeAgo(d.sender,d.timestamp,e.timeAgo),t.next=37;break;case 35:t.prev=35,t.t5=t.catch(24);case 37:a++,t.next=8;break;case 40:k.sortUsersListBaseOnLastMessageTimestamp();case 41:case"end":return t.stop()}}),t,null,[[11,22],[24,35]])})))),re(e,"setChatboxEventListener",(function(){var e=document.getElementById("chatbox-message-input");e.onblur=function(){k.unHideMediaGroup()},e.onfocus=function(){k.hideMediaGroup()}})),re(e,"setChatboxInfiniteScrolling",z(X().mark((function t(){var r;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=document.getElementById("chatbox")).onscroll=z(X().mark((function t(){var n,a,o,i,s,c,u,l,d,p,f,m,h,g,v,y,b;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!=r.scrollTop||e.isReceivedFirstMessage||e.isLockInfiniteScrolling){t.next=72;break}e.page+=1,e.isLockInfiniteScrolling=!0,n=r.removeChild(r.children[0]),a=0,o=null;case 7:if(!(a<r.children.length)){t.next=14;break}if((o=r.children[a]).classList.contains("divider-timestamp")){t.next=11;break}return t.abrupt("break",14);case 11:a++,t.next=7;break;case 14:return i=k.createLoaderElement(),r.prepend(i),t.next=18,e.service.getMessages(e.uidValue,e.currentUserValue.id,e.userToChatId,e.page,e.pageSize,1);case 18:if(!(s=t.sent).ok){t.next=70;break}return t.next=22,s.json();case 22:if(c=t.sent,r.removeChild(i),!c.length){t.next=69;break}u=0;case 26:if(!(u<c.length)){t.next=63;break}return l=c[u],d=l.id,p=l.content,l.isSeen,f=JSON.parse(atob(p)),m=f.sender,h=f.receiver,t.prev=29,g=null,t.t0=JSON,t.next=34,k.decryptMessage(e.currentUserPrivatekey,m);case 34:t.t1=t.sent,(v=t.t0.parse.call(t.t0,t.t1)).type==ae.TEXT?g=k.createOutgoingMessageTextElement(v.content,v.timestamp,e.timeAgo):v.type==ae.AUDIO?g=k.createOutgoingMessageVoiceElement(v.content,v.timestamp,e.timeAgo):v.type==ae.IMAGE&&(g=k.createOutgoingMessageImageElement(v.content,v.timestamp,e.timeAgo),k.setViewerJsImageElement(g,e.viewer)),g.setAttribute("messageId",d),g.setAttribute("messageData",JSON.stringify(v)),g.copyTextMessageCallback=e.copyTextMessageCallback,g.forwardMessageCallback=e.forwardMessageCallback,r.prepend(g),g.querySelector(".img-check").src="/green_checks.svg",t.next=60;break;case 46:return t.prev=46,t.t2=t.catch(29),y=null,t.t3=JSON,t.next=52,k.decryptMessage(e.currentUserPrivatekey,h);case 52:t.t4=t.sent,(b=t.t3.parse.call(t.t3,t.t4)).type==ae.TEXT?y=k.createIncomingMessageTextElement(b.content,e.usersMap.get(b.sender).userDetails.avatar,b.timestamp,e.timeAgo):b.type==ae.AUDIO?y=k.createIncomingMessageVoiceElement(b.content,e.usersMap.get(b.sender).userDetails.avatar,b.timestamp,e.timeAgo):b.type==ae.IMAGE&&(y=k.createIncommingMessageImageElement(b.content,e.usersMap.get(b.sender).userDetails.avatar,b.timestamp,e.timeAgo),k.setViewerJsImageElement(y,e.viewer)),y.setAttribute("messageId",d),y.setAttribute("messageData",JSON.stringify(b)),y.copyTextMessageCallback=e.copyTextMessageCallback,y.forwardMessageCallback=e.forwardMessageCallback,r.prepend(y);case 60:u++,t.next=26;break;case 63:k.setChatboxMessageAvatarHidden(),k.setChatboxDividerTimestamp(),k.setChatboxMessageBorderAndMargin(),setTimeout((function(){o.scrollIntoView({behavior:"smooth",block:"end"}),r.prepend(n),e.isLockInfiniteScrolling=!1}),500),t.next=70;break;case 69:e.isReceivedFirstMessage=!0;case 70:t.next=73;break;case 72:e.isSidebarUserClickOnce=!1;case 73:case"end":return t.stop()}}),t,null,[[29,46]])}))),t.next=4,e.sleep(1);case 4:case"end":return t.stop()}}),t)})))),re(e,"setForwardUserId",(function(t){var r=document.getElementById("forward-user-svg-sent-".concat(t.id)),n=document.getElementById("forward-user-svg-default-".concat(t.id)),a=document.getElementById("forward-user-span-text-".concat(t.id)),o=document.getElementById("forward-user-button-".concat(t.id));o.onclick=z(X().mark((function i(){return X().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(o.setAttribute("disabled",""),o.classList.add("cursor-not-allowed"),r.classList.remove("hidden"),n.classList.add("hidden"),a.textContent="Sent",e.forwardUserMessageType!=ae.TEXT){i.next=10;break}return i.next=8,e.sendTextMessage(t.id,e.forwardUserMessageContent);case 8:case 13:i.next=18;break;case 10:if(e.forwardUserMessageType!=ae.AUDIO){i.next=15;break}return i.next=13,e.sendVoiceMessage(t.id,e.forwardUserMessageBlob);case 15:if(e.forwardUserMessageType!=ae.IMAGE){i.next=18;break}return i.next=18,e.sendImageMessage(t.id,e.forwardUserMessageBlob,e.forwardUserMessageInput,e.forwardUserMessageWidth,e.forwardUserMessageHeight,e.forwardUserMessageMimeType,e.forwardUserMessageExtension,e.forwardUserMessageOutput);case 18:case"end":return i.stop()}}),i)})))})),re(e,"setDefaultValues",(function(){e.page=1,e.isReceivedFirstMessage=!1,e.isLockInfiniteScrolling=!0,document.getElementById("viewerjs-images-container").innerHTML=""})),re(e,"copyTextMessageCallback",function(){var e=z(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.writeText(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),re(e,"forwardMessageCallback",(function(t,r,n,a,o,i,s,c,u){e.forwardUserMessageType=t,e.forwardUserMessageContent=r,e.forwardUserMessageBlob=n,e.forwardUserMessageInput=a,e.forwardUserMessageWidth=o,e.forwardUserMessageHeight=i,e.forwardUserMessageMimeType=s,e.forwardUserMessageExtension=c,e.forwardUserMessageOutput=u,k.setForwardUserUiDefaults(e.usersMap)})),re(e,"setConversations",z(X().mark((function t(){var r,n,a,o,i,s,c,u,l,d,p,f,m,h,g,v,y,b,w,x;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=function(){var e=document.getElementById("chatbox"),t=document.createElement("div");t.className="flex flex-grow",e.innerHTML="",e.append(t)},r(),n=document.getElementById("chatbox"),a=k.createLoaderElement(),n.appendChild(a),o=!1,t.next=8,e.service.getMessages(e.uidValue,e.currentUserValue.id,e.userToChatId,e.page,e.pageSize);case 8:if(!(i=t.sent).ok){t.next=53;break}return t.next=12,i.json();case 12:s=t.sent,c=0;case 14:if(!(c<s.length)){t.next=51;break}return u=s[c],l=u.id,d=u.content,u.isSeen,p=JSON.parse(atob(d)),f=p.sender,m=p.receiver,t.prev=17,h=null,t.t0=JSON,t.next=22,k.decryptMessage(e.currentUserPrivatekey,f);case 22:t.t1=t.sent,(g=t.t0.parse.call(t.t0,t.t1)).type==ae.TEXT?h=k.createOutgoingMessageTextElement(g.content,g.timestamp,e.timeAgo):g.type==ae.AUDIO?h=k.createOutgoingMessageVoiceElement(g.content,g.timestamp,e.timeAgo):g.type==ae.IMAGE&&(h=k.createOutgoingMessageImageElement(g.content,g.timestamp,e.timeAgo),k.setViewerJsImageElement(h,e.viewer)),h.setAttribute("messageId",l),h.setAttribute("messageData",JSON.stringify(g)),h.copyTextMessageCallback=e.copyTextMessageCallback,h.forwardMessageCallback=e.forwardMessageCallback,n.appendChild(h),h.querySelector(".img-check").src="/green_checks.svg",t.next=48;break;case 34:return t.prev=34,t.t2=t.catch(17),v=null,t.t3=JSON,t.next=40,k.decryptMessage(e.currentUserPrivatekey,m);case 40:t.t4=t.sent,(y=t.t3.parse.call(t.t3,t.t4)).type==ae.TEXT?v=k.createIncomingMessageTextElement(y.content,e.usersMap.get(y.sender).userDetails.avatar,y.timestamp,e.timeAgo):y.type==ae.AUDIO?v=k.createIncomingMessageVoiceElement(y.content,e.usersMap.get(y.sender).userDetails.avatar,y.timestamp,e.timeAgo):y.type==ae.IMAGE&&(v=k.createIncommingMessageImageElement(y.content,e.usersMap.get(y.sender).userDetails.avatar,y.timestamp,e.timeAgo),k.setViewerJsImageElement(v,e.viewer)),v.setAttribute("messageId",l),v.setAttribute("messageData",JSON.stringify(y)),v.copyTextMessageCallback=e.copyTextMessageCallback,v.forwardMessageCallback=e.forwardMessageCallback,n.appendChild(v);case 48:c++,t.next=14;break;case 51:e.chatboxScrollToBottom(!0),o=!!s.length;case 53:e.isLockInfiniteScrolling=!1,n.removeChild(a),k.setChatboxMessageAvatarHidden(),k.setChatboxDividerTimestamp(),k.setChatboxMessageBorderAndMargin(),o||(b=e.usersMap.get(e.userToChatId),w="".concat(b.userDetails.firstname," ").concat(b.userDetails.lastname),x=b.userDetails.avatar,k.setIntroductionElement(w,x));case 59:case"end":return t.stop()}}),t,null,[[17,34]])})))),re(e,"setUserToChatName",(function(e){document.getElementById("userToChatName").textContent=e})),re(e,"setUserToChatAvatar",(function(e){document.getElementById("usertochat-avatar").style.backgroundImage="url('".concat(e,"')")})),re(e,"setUserToChatOnlineStatus",(function(){var t=e.usersOnlineMap.get(e.userToChatId),r=document.getElementById("usertochat-online-status"),n=document.getElementById("usertochat-online-text");t?(r.classList.remove("bg-red-400"),r.classList.add("bg-green-400"),n.textContent="Active now"):(r.classList.add("bg-red-400"),r.classList.remove("bg-green-400"),setTimeout(z(X().mark((function t(){return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setUserLastSeen(n);case 2:case"end":return t.stop()}}),t)}))),1))})),re(e,"setUserLastSeen",function(){var t=z(X().mark((function t(r){var n,a;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.textContent="Offline",t.next=3,e.service.getUserLastSeen(e.uidValue,e.userToChatId);case 3:if(!(n=t.sent).ok){t.next=9;break}return t.next=7,n.json();case 7:a=t.sent,r.textContent="Last seen "+e.timeAgo.format(parseInt(a.timestamp),"round");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),re(e,"setDarkModeToggle",(function(){var e=document.getElementById("theme-toggle-dark-icon"),t=document.getElementById("theme-toggle-light-icon"),r=document.querySelector(".emoji-picker");"dark"===localStorage.getItem("color-theme")||!("color-theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?(t.classList.remove("hidden"),document.documentElement.classList.add("dark"),r.classList.remove("light"),r.classList.add("dark")):(e.classList.remove("hidden"),document.documentElement.classList.remove("dark"),r.classList.add("light"),r.classList.remove("dark")),document.getElementById("theme-toggle").onclick=function(){e.classList.toggle("hidden"),t.classList.toggle("hidden"),localStorage.getItem("color-theme")?"light"===localStorage.getItem("color-theme")?(document.documentElement.classList.add("dark"),localStorage.setItem("color-theme","dark"),r.classList.remove("light"),r.classList.add("dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("color-theme","light"),r.classList.add("light"),r.classList.remove("dark")):document.documentElement.classList.contains("dark")?(document.documentElement.classList.remove("dark"),localStorage.setItem("color-theme","light")):(document.documentElement.classList.add("dark"),localStorage.setItem("color-theme","dark"))}})),re(e,"setEmojiPickerElement",(function(){var e=document.getElementById("chatbox-message-input");document.querySelector("emoji-picker").addEventListener("emoji-click",(function(t){var r=k.saveCaretPosition(e);e.innerHTML=e.innerHTML.substring(0,r)+t.detail.unicode+e.innerHTML.substring(r),k.restoreCaretPosition(e,r+t.detail.unicode.length)}))})),re(e,"setSidebarUserToggleForMobile",(function(){"mobile"==k.getUserAgentPlatformType()&&setTimeout((function(){document.getElementById("separator-sidebar-button").click()}),200)})),re(e,"setMainChatbox",(function(){var e=document.getElementById("main-chatbox"),t=document.getElementById("main-chatbox-intro");e.classList.remove("hidden"),t.classList.add("hidden")})),re(e,"setSentMessage",function(){var t=z(X().mark((function t(r,n,a,o,i,s){var c,u,l,d,p,f,m=arguments;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=m.length>6&&void 0!==m[6]?m[6]:null,u=document.getElementById("chatbox"),e.chatboxScrollToBottom(!0),parseInt(e.userToChatId)==parseInt(r)&&(c?u.replaceChild(a,c):u.appendChild(a)),k.reOrderLastFourChatboxElements(),k.setChatboxMessageAvatarHidden(),k.setChatboxDividerTimestamp(),k.setChatboxMessageBorderAndMargin(),t.next=10,e.service.createTextMessage(e.uidValue,"messages/".concat(e.currentUserValue.id,"/").concat(r),"".concat(e.currentUserValue.id,"-").concat(r),e.currentUserValue.id,r,ae.TEXT,n,s,!0);case 10:if(l=t.sent,d=a.querySelector(".img-check"),!l.ok){t.next=25;break}return t.next=15,l.json();case 15:p=t.sent,f=p.id,a.setAttribute("messageId",f),i==ae.TEXT?k.setUserLastMessageContent(r,o):i==ae.AUDIO?k.setUserLastMessageContent(r,"You sent an audio"):i==ae.IMAGE&&k.setUserLastMessageContent(r,"You sent an image"),k.setUserLastMessageTimestamp(r,s),k.setUserLastMessageTimeAgo(r,s,e.timeAgo),k.reOrderUsersListIfNewMessageIsBeingSentOrReceived(r),d.src="/green_checks.svg",t.next=26;break;case 25:d.src="/red_checks.svg";case 26:case"end":return t.stop()}}),t)})));return function(e,r,n,a,o,i){return t.apply(this,arguments)}}()),re(e,"sendTextMessage",function(){var t=z(X().mark((function t(r,n){var a,o,i,s,c,u,l,d;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return document.getElementById("chatbox-message-input").textContent="",a=ae.TEXT,o=Date.now(),i=JSON.stringify({sender:e.currentUserValue.id,receiver:r,type:a,content:n,timestamp:o}),s=k.base64ToArrayBuffer(e.usersMap.get(r).userDetails.publickey.publickey),t.next=8,k.encryptMessage(e.currentUserPublickey,i);case 8:return c=t.sent,t.next=11,k.encryptMessage(s,i);case 11:return u=t.sent,l=btoa(JSON.stringify({sender:c,receiver:u})),(d=k.createOutgoingMessageTextElement(n,o,e.timeAgo)).setAttribute("messageData",i),d.copyTextMessageCallback=e.copyTextMessageCallback,d.forwardMessageCallback=e.forwardMessageCallback,t.next=19,e.setSentMessage(r,l,d,n,a,o);case 19:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()),re(e,"sendVoiceMessage",function(){var t=z(X().mark((function t(r,n){var a,o,i,s,c,u,l,d,p,f,m,h,g,v,y;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.audioBlob=null,a=document.getElementById("voicechat-record-delete"),o=document.getElementById("voicechat-record-close"),a.click(),o.click(),i=URL.createObjectURL(n),s=document.getElementById("chatbox"),c=k.createOutgoingMessageVoiceElement(i,Date.now(),e.timeAgo),e.chatboxScrollToBottom(!0),parseInt(e.userToChatId)==parseInt(r)&&s.appendChild(c),t.t0=e.ffmpeg,t.t1=Uint8Array,t.next=14,n.arrayBuffer();case 14:return t.t2=t.sent,t.t3=new t.t1(t.t2),t.next=18,t.t0.writeFile.call(t.t0,"input.webm",t.t3);case 18:return t.next=20,e.ffmpeg.exec(["-i","input.webm","-c:a","libopus","-b:a","0","output.webm"]);case 20:return t.t4=File,t.next=23,e.ffmpeg.readFile("output.webm");case 23:return t.t5=t.sent,t.t6=[t.t5],t.t7={type:"audio/webm"},u=new t.t4(t.t6,"audio.webm",t.t7),t.next=29,e.service.createAudioMessage(e.uidValue,u,c,k.progressSvgElementCallback);case 29:if(200!=(l=t.sent).status){t.next=48;break}return d=ae.AUDIO,p=Date.now(),f=JSON.stringify({sender:e.currentUserValue.id,receiver:r,type:d,content:l.data,timestamp:p}),m=k.base64ToArrayBuffer(e.usersMap.get(r).userDetails.publickey.publickey),t.next=37,k.encryptMessage(e.currentUserPublickey,f);case 37:return h=t.sent,t.next=40,k.encryptMessage(m,f);case 40:return g=t.sent,v=btoa(JSON.stringify({sender:h,receiver:g})),(y=k.createOutgoingMessageVoiceElement(i,p,e.timeAgo)).setAttribute("messageData",f),y.copyTextMessageCallback=e.copyTextMessageCallback,y.forwardMessageCallback=e.forwardMessageCallback,t.next=48,e.setSentMessage(r,v,y,null,d,p,c);case 48:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()),re(e,"sendImageMessage",function(){var t=z(X().mark((function t(r,n,a,o,i,s,c,u){var l,d,p,f,m,h,g,v,y,b,w,x,E,L;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l=null,d=URL.createObjectURL(n),"png"!=c){t.next=24;break}return t.t0=e.ffmpeg,t.t1=a,t.t2=Uint8Array,t.next=8,n.arrayBuffer();case 8:return t.t3=t.sent,t.t4=new t.t2(t.t3),t.next=12,t.t0.writeFile.call(t.t0,t.t1,t.t4);case 12:return t.next=14,e.ffmpeg.exec(["-i",a,"-vf","scale=".concat(o,":").concat(i),u]);case 14:return t.t5=File,t.next=17,e.ffmpeg.readFile(u);case 17:t.t6=t.sent,t.t7=[t.t6],t.t8=u,t.t9={type:s},l=new t.t5(t.t7,t.t8,t.t9),t.next=80;break;case 24:if("GIF"!=c){t.next=37;break}return t.t10=File,t.t11=Uint8Array,t.next=29,n.arrayBuffer();case 29:t.t12=t.sent,t.t13=new t.t11(t.t12),t.t14=[t.t13],t.t15=u,t.t16={type:s},l=new t.t10(t.t14,t.t15,t.t16),t.next=80;break;case 37:if("heic"!=c){t.next=61;break}return t.next=40,H()({blob:n,toType:"image/jpeg"});case 40:return p=t.sent,d=URL.createObjectURL(p),t.t17=e.ffmpeg,t.t18=Uint8Array,t.next=46,p.arrayBuffer();case 46:return t.t19=t.sent,t.t20=new t.t18(t.t19),t.next=50,t.t17.writeFile.call(t.t17,"input.jpeg",t.t20);case 50:return t.next=52,e.ffmpeg.exec(["-i","input.jpeg","-pix_fmt","yuv420p","-vf","scale=".concat(o,":").concat(i),"output.jpeg"]);case 52:return t.t21=File,t.next=55,e.ffmpeg.readFile("output.jpeg");case 55:t.t22=t.sent,t.t23=[t.t22],t.t24={type:"image/jpeg"},l=new t.t21(t.t23,"output.jpeg",t.t24),t.next=80;break;case 61:return t.t25=e.ffmpeg,t.t26=a,t.t27=Uint8Array,t.next=66,n.arrayBuffer();case 66:return t.t28=t.sent,t.t29=new t.t27(t.t28),t.next=70,t.t25.writeFile.call(t.t25,t.t26,t.t29);case 70:return t.next=72,e.ffmpeg.exec(["-i",a,"-pix_fmt","yuv420p","-vf","scale=".concat(o,":").concat(i),u]);case 72:return t.t30=File,t.next=75,e.ffmpeg.readFile(u);case 75:t.t31=t.sent,t.t32=[t.t31],t.t33=u,t.t34={type:s},l=new t.t30(t.t32,t.t33,t.t34);case 80:return f=document.getElementById("chatbox"),m=k.createOutgoingMessageImageElement(d,Date.now(),e.timeAgo),e.chatboxScrollToBottom(!0),parseInt(e.userToChatId)==parseInt(r)&&f.appendChild(m),t.next=86,e.service.createImageMessage(e.uidValue,l,"heic"==c?"jpeg":c,m,k.progressSvgElementCallback);case 86:if(200!=(h=t.sent).status){t.next=106;break}return g=ae.IMAGE,v=Date.now(),y=JSON.stringify({sender:e.currentUserValue.id,receiver:r,type:g,content:h.data,timestamp:v}),b=k.base64ToArrayBuffer(e.usersMap.get(r).userDetails.publickey.publickey),t.next=94,k.encryptMessage(e.currentUserPublickey,y);case 94:return w=t.sent,t.next=97,k.encryptMessage(b,y);case 97:return x=t.sent,E=btoa(JSON.stringify({sender:w,receiver:x})),(L=k.createOutgoingMessageImageElement(d,v,e.timeAgo)).setAttribute("messageData",y),L.copyTextMessageCallback=e.copyTextMessageCallback,L.forwardMessageCallback=e.forwardMessageCallback,k.setViewerJsImageElement(L,e.viewer),t.next=106,e.setSentMessage(r,E,L,null,g,v,m);case 106:case"end":return t.stop()}}),t)})));return function(e,r,n,a,o,i,s,c){return t.apply(this,arguments)}}()),re(e,"setOnChangeImageFileInput",(function(){document.getElementById("image-file-input").onchange=function(){var t=z(X().mark((function t(r){var n,a,o,i,s,c,u,l,d;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.target.files,a=document.getElementById("chatbox-message-input"),o=document.getElementById("chatbox-voice-input"),i=document.getElementById("chatbox-image-input"),s=document.getElementById("send-text-button"),c=document.getElementById("send-voice-button"),u=document.getElementById("send-image-button"),i.innerHTML="",!n.length){t.next=23;break}k.hideMediaGroup(),a.classList.add("hidden"),o.classList.add("hidden"),i.classList.remove("hidden"),s.classList.add("hidden"),c.classList.add("hidden"),u.classList.remove("hidden"),l=X().mark((function t(r){var l,d,p,f,m;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l=n[r],e.toSendImagesMap.set(r,{file:l,width:null,height:null}),(d=document.createElement("div")).style.position="relative",d.style.display="inline-block",d.style.margin="5px",(p=document.createElement("img")).setAttribute("mimeType",l.type),p.setAttribute("key",r),p.classList.add("image"),p.style.width="50px",p.style.height="50px",p.style.objectFit="fill",(f=new FileReader).onload=function(t){var n=document.createElement("img");n.src=t.target.result,n.onload=function(){e.toSendImagesMap.set(r,{file:l,width:n.width,height:n.height})},p.src=t.target.result},f.readAsDataURL(l),(m=document.createElement("button")).innerHTML="&times;",m.style.position="absolute",m.style.top="0",m.style.right="0",m.style.backgroundColor="rgb(234 63 63)",m.style.color="white",m.style.border="none",m.style.borderRadius="50%",m.style.cursor="pointer",m.style.width="25px",m.style.height="25px",m.style.fontSize="14px",m.style.lineHeight="25px",m.style.textAlign="center",m.onclick=function(){e.toSendImagesMap.delete(r),i.removeChild(d),e.toSendImagesMap.size||(a.classList.remove("hidden"),o.classList.add("hidden"),i.classList.add("hidden"),s.classList.remove("hidden"),c.classList.add("hidden"),u.classList.add("hidden"))},d.appendChild(p),d.appendChild(m),i.appendChild(d);case 35:case"end":return t.stop()}}),t)})),d=0;case 18:if(!(d<n.length)){t.next=23;break}return t.delegateYield(l(d),"t0",20);case 20:d++,t.next=18;break;case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),re(e,"setImageButtonClick",(function(){document.getElementById("image-input-button").onclick=function(){!e.isVoiceRecording&&e.isCloseVoiceRecording&&document.getElementById("image-file-input").click()}})),re(e,"setSendTextButtonClick",(function(){var t=document.getElementById("chatbox-message-input");document.getElementById("send-text-button").onclick=z(X().mark((function r(){var n;return X().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=t.innerText.trim(),e.isEmptyOrSpaces(n)){r.next=4;break}return r.next=4,e.sendTextMessage(e.userToChatId,n);case 4:case"end":return r.stop()}}),r)})))})),re(e,"setSendVoiceButtonClick",(function(){document.getElementById("send-voice-button").onclick=z(X().mark((function t(){return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==e.audioBlob||e.isVoiceRecording){t.next=3;break}return t.next=3,e.sendVoiceMessage(e.userToChatId,e.audioBlob);case 3:case"end":return t.stop()}}),t)})))})),re(e,"setSendImageButtonClick",(function(){var t=document.getElementById("chatbox-message-input"),r=document.getElementById("chatbox-voice-input"),n=document.getElementById("chatbox-image-input"),a=document.getElementById("send-text-button"),o=document.getElementById("send-voice-button"),i=document.getElementById("send-image-button");i.onclick=function(){k.isTotalImagesToSendNotExceeded(e.toSendImagesMap.size)&&k.isImageFilesizeNotExceeded(Array.from(e.toSendImagesMap))&&(e.toSendImagesMap.forEach(function(){var t=z(X().mark((function t(r,n){var a,o,i,s,u,l,d;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.file,o=r.file.name,i=Math.floor(.75*r.width),s=Math.floor(.75*r.height),u=r.file.type,l=u.split("/")[1],d=c().MD5(k.generateRandomString(16)).toString()+"."+l,t.next=9,e.sendImageMessage(e.userToChatId,a,o,i,s,u,l,d);case 9:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()),k.unHideMediaGroup(),e.toSendImagesMap=new Map,n.innerHTML="",t.classList.remove("hidden"),r.classList.add("hidden"),n.classList.add("hidden"),a.classList.remove("hidden"),o.classList.add("hidden"),i.classList.add("hidden"))}})),re(e,"setSendMessageChatboxInputKeyDown",(function(){document.getElementById("chatbox-message-input").onkeydown=function(){var t=z(X().mark((function t(r){var n;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.target.innerText.trim(),"desktop"!=k.getUserAgentPlatformType()){t.next=7;break}if("Enter"!==r.key||r.shiftKey){t.next=7;break}if(r.preventDefault(),e.isEmptyOrSpaces(n)){t.next=7;break}return t.next=7,e.sendTextMessage(e.userToChatId,n);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),re(e,"chatboxScrollToBottom",(function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=document.getElementById("chatbox");r?setTimeout((function(){n.style.scrollBehavior="smooth",n.scrollTop=n.scrollHeight}),500):(e=n,t=.4*Math.abs(e.scrollHeight-e.clientHeight),Math.abs(e.scrollHeight-e.clientHeight-e.scrollTop)<=t&&setTimeout((function(){n.style.scrollBehavior="smooth",n.scrollTop=n.scrollHeight}),500))})),re(e,"isEmptyOrSpaces",(function(e){return null===e||null!==e.match(/^ *$/)})),re(e,"sleep",(function(e){return new Promise((function(t){return setTimeout(t,e)}))})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$(e,t)}(t,e),te(t)}(a.xI);re(oe,"values",{currentUser:Object,uid:String,publickey:String,privatekey:String,passphrase:String})},27:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});r(2675),r(9463),r(6412),r(2259),r(5700),r(8125),r(6280),r(6918),r(8706),r(1629),r(3792),r(4114),r(4490),r(4782),r(9572),r(4170),r(2010),r(4731),r(479),r(2892),r(9904),r(4185),r(875),r(287),r(6099),r(3362),r(825),r(7764),r(3500),r(2953);function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(){a=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},s="function"==typeof Symbol?Symbol:{},c=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function d(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,r){return e[t]=r}}function p(e,t,r,n){var a=t&&t.prototype instanceof b?t:b,o=Object.create(a.prototype),s=new j(n||[]);return i(o,"_invoke",{value:A(e,r,s)}),o}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=p;var m="suspendedStart",h="suspendedYield",g="executing",v="completed",y={};function b(){}function w(){}function x(){}var E={};d(E,c,(function(){return this}));var k=Object.getPrototypeOf,L=k&&k(k(B([])));L&&L!==r&&o.call(L,c)&&(E=L);var M=x.prototype=b.prototype=Object.create(E);function C(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function r(a,i,s,c){var u=f(e[a],e,i);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==n(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,c)}),(function(e){r("throw",e,s,c)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,c)}))}c(u.arg)}var a;i(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,a){r(e,n,t,a)}))}return a=a?a.then(o,o):o()}})}function A(t,r,n){var a=m;return function(o,i){if(a===g)throw Error("Generator is already running");if(a===v){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var c=T(s,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=g;var u=f(t,r,n);if("normal"===u.type){if(a=n.done?v:h,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=v,n.method="throw",n.arg=u.arg)}}}function T(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var o=f(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function B(t){if(t||""===t){var r=t[c];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(o.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return w.prototype=x,i(M,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:w,configurable:!0}),w.displayName=d(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,d(e,l,"GeneratorFunction")),e.prototype=Object.create(M),e},t.awrap=function(e){return{__await:e}},C(I.prototype),d(I.prototype,u,(function(){return this})),t.AsyncIterator=I,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new I(p(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(M),d(M,l,"Generator"),d(M,c,(function(){return this})),d(M,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=B,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,a){return s.type="throw",s.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:B(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function c(e,t,r){return t=l(t),function(e,t){if(t&&("object"==n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,u()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r))}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(u=function(){return!!e})()}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function p(e,t,r){return(t=f(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=n(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}var m=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return p(e=c(this,t,[].concat(n)),"connect",i(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))),p(e,"showPassword",(function(e){var t=document.getElementById(e.params.inputPasswordId),r=document.getElementById(e.params.eyeSvg),n=document.getElementById(e.params.eyeSvgDefault);e.params.isShow?(r.classList.add("hidden"),n.classList.remove("hidden"),t.setAttribute("type","text")):(r.classList.remove("hidden"),n.classList.add("hidden"),t.setAttribute("type","password"))})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),r=t,n&&s(r.prototype,n),o&&s(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(r(2891).xI)},4378:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});r(2675),r(9463),r(2259),r(5700),r(6280),r(6918),r(8706),r(3792),r(9572),r(4170),r(2892),r(9904),r(4185),r(875),r(287),r(6099),r(825),r(7764),r(2953);function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function o(e,t,r){return t=s(t),function(e,t){if(t&&("object"==n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,i()?Reflect.construct(t,r||[],s(e).constructor):t.apply(e,r))}function i(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(i=function(){return!!e})()}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function u(e,t,r){return(t=l(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=n(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}var d=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return u(e=o(this,t,[].concat(n)),"connect",(function(){})),u(e,"showPassword",(function(e){var t=document.getElementById(e.params.inputPasswordId),r=document.getElementById(e.params.eyeSvg),n=document.getElementById(e.params.eyeSvgDefault);e.params.isShow?(r.classList.add("hidden"),n.classList.remove("hidden"),t.setAttribute("type","text")):(r.classList.remove("hidden"),n.classList.add("hidden"),t.setAttribute("type","password"))})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(t,e),r=t,n&&a(r.prototype,n),i&&a(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}(r(2891).xI)},2401:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});r(2675),r(9463),r(2259),r(5700),r(6280),r(6918),r(8706),r(3792),r(9572),r(4170),r(2892),r(9904),r(4185),r(875),r(287),r(6099),r(825),r(7764),r(2953);function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function o(e,t,r){return t=s(t),function(e,t){if(t&&("object"==n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,i()?Reflect.construct(t,r||[],s(e).constructor):t.apply(e,r))}function i(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(i=function(){return!!e})()}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function u(e,t,r){return(t=l(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=n(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}var d=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return u(e=o(this,t,[].concat(n)),"connect",(function(){})),u(e,"showPassword",(function(e){var t=document.getElementById(e.params.inputPasswordId),r=document.getElementById(e.params.eyeSvg),n=document.getElementById(e.params.eyeSvgDefault);e.params.isShow?(r.classList.add("hidden"),n.classList.remove("hidden"),t.setAttribute("type","text")):(r.classList.remove("hidden"),n.classList.add("hidden"),t.setAttribute("type","password"))})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(t,e),r=t,n&&a(r.prototype,n),i&&a(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}(r(2891).xI)},2882:(e,t,r)=>{"use strict";(0,r(3066).E)(r(5926)),r(2315)},477:()=>{}},e=>{e.O(0,[835],(()=>{return t=2882,e(e.s=t);var t}));e.O()}]);